The map editor is in Passability mode (also known as "Wallmap mode").

F2 switch to picture mode
F3 switch to passability mode
F4 switch to door placement mode
F5 switch to NPC placement mode
F6 switch to foemap mode
F7 switch to zonemap mode

Use the arrow keys to move around the map.

Use SHIFT+arrow keys to move around the map faster.

Use ALT+arrow keys to move the view of the map.

While you are in passability mode, you will see thick flashing lines that indicate where walls are located.

At the top right corner the current drawing tool is shown. Press SPACE to draw on the wallmap. The tools are:

D - Draw tool:
  Press SPACE to make the tile under 
  the cursor fully impassable in all 
  four directions. Press SPACE again 
  to remove the walls and make the 
  tile passable.

B - Box tool:
  Press SPACE once to place one 
  corner of the box, and SPACE a 
  second time at the opposite corner 
  to make a rectangle of walls 
  passable or completely impassable.

P - Paint on Layer # tool:
  Finds the continuous area on the
  current tilemap layer under the
  cursor, and adds/removes walls to
  all those tiles; like a flood fill
  of a map layer except that the map
  layer isn't modified. You can use
  PageDown and PageUp to change the
  selected layer. For example, you
  can use this to make a pond
  impassable (but default wallmaps
  are generally much easier!)

M - Mark tool:
  Use to select a rectangular of the
  map to copy. Press SPACE once to
  place one corner of the rectangle,
  and SPACE a second time at the
  opposite corner. The tool will then
  be changed to the Clone tool. Mark
  copies the visible tilemap layers,
  wallmap, foemap, and zones in the
  rectangle.

C - Clone tool:
  Press SPACE to paste a selection
  copied with the Mark tool.  You can
  switch to different editing modes
  to preview the changes to walls,
  foemap, and zones.  If default
  passability is on (press CTRL+D to
  toggle), the wallmap will updated
  using default walls instead of the
  copied walls.  Only visible map
  layers are modified (press ALT+~ to
  toggle visibility of the current
  map layer), so a map layer has to
  be visible both when Marking and
  when Cloning.

If the current tool isn't the Draw tool, press + or - to toggle whether you are adding or removing walls.

CTRL+Up makes the selected tile impassable on the top.

CTRL+Down makes the selected tile impassable on the bottom.

CTRL+Left makes the selected tile impassable on the left side.

CTRL+Right makes the selected tile
impassable on the right side.

H marks the tile as a harm tile that can damage heroes when the player steps on it.

CTRL+A marks the tile as special for Airships (or other vehicle or scripting purposes).

CTRL+B marks the tile as special for Boats (or other vehicle or scripting purposes).

O marks the tile as overhead. This is obsolete. You should create a layer above heroes and NPCs instead if you want make tiles overhead.

CTRL+Z undoes a change to the tilemap, wallmap, foemap or zonemap. Changes to NPCs and doors are not undoable. The undo history buffer is near-infinite, but certain things cause it to be cleared: resizing the map, deleting or swapping map layers, erasing map data, and leaving the map editor.

CTRL+Y redoes an undone change.

CTRL+S immediately saves, useful when live-previewing a game.

TAB toggles a blue rectangle that shows roughly what area of the map you are currently looking at.

~ shows a preview of the entire map.
